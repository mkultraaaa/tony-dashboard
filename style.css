:root{
  --bg0:#070A12;
  --bg1:#0C1020;
  --card:rgba(255,255,255,.06);
  --card2:rgba(255,255,255,.08);
  --stroke:rgba(255,255,255,.12);
  --text:#EEF2FF;
  --muted:rgba(238,242,255,.65);
  --muted2:rgba(238,242,255,.45);
  --brand:#7C3AED;
  --brand2:#22D3EE;
  --good:#22C55E;
  --warn:#F59E0B;
  --bad:#EF4444;
  --shadow: 0 12px 40px rgba(0,0,0,.35);
  --r12:12px;
  --r16:16px;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:Inter,-apple-system,BlinkMacSystemFont,system-ui,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:radial-gradient(1200px 800px at 10% 10%, rgba(124,58,237,.35), transparent 60%),
             radial-gradient(900px 700px at 90% 20%, rgba(34,211,238,.22), transparent 55%),
             radial-gradient(1000px 800px at 50% 110%, rgba(34,197,94,.10), transparent 55%),
             linear-gradient(180deg, var(--bg0), var(--bg1));
}

.bg{position:fixed;inset:0;pointer-events:none;opacity:.35;background-image:radial-gradient(rgba(255,255,255,.20) 1px, transparent 1px);background-size:22px 22px;mask-image:radial-gradient(closest-side at 50% 30%, black 0%, transparent 75%)}

.container{max-width:1440px;margin:0 auto;padding:28px 22px 40px}

/* Topbar */
.topbar{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:12px}
.brand{display:flex;align-items:center;gap:12px}
.brand-mark{width:42px;height:42px;border-radius:14px;display:grid;place-items:center;background:linear-gradient(135deg, rgba(124,58,237,.25), rgba(34,211,238,.18));border:1px solid var(--stroke);box-shadow:var(--shadow)}
.brand-title{font-size:16px;font-weight:800;letter-spacing:.2px}
.brand-sub{font-size:12px;color:var(--muted)}

.topbar-right{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:flex-end}

.pill{display:flex;align-items:center;gap:8px;padding:10px 12px;border-radius:999px;background:var(--card);border:1px solid var(--stroke);backdrop-filter: blur(10px)}
.pill-text{font-size:12px;color:var(--muted)}
.dot{width:8px;height:8px;border-radius:50%}
.dot.ok{background:var(--good)}

.btn{appearance:none;border:1px solid rgba(255,255,255,.14);background:linear-gradient(135deg, rgba(124,58,237,.9), rgba(34,211,238,.45));color:white;font-weight:700;padding:10px 12px;border-radius:12px;cursor:pointer;box-shadow:0 8px 20px rgba(124,58,237,.18);transition:transform .12s ease, filter .12s ease}
.btn:hover{transform:translateY(-1px);filter:brightness(1.03)}
.btn:active{transform:translateY(0px)}
.btn.ghost{background:rgba(255,255,255,.04);box-shadow:none}

/* Tabs */
.tabs{display:flex;gap:8px;align-items:center;margin-bottom:14px}
.tab{appearance:none;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.12);color:var(--muted);padding:10px 12px;border-radius:12px;cursor:pointer;font-weight:700;font-size:13px}
.tab.active{color:var(--text);border-color:rgba(34,211,238,.35);background:rgba(34,211,238,.08)}

/* Toolbar */
.toolbar{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:16px}
.search{flex:1;min-width:240px}
.filters{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.meta{font-size:12px;color:var(--muted2)}

.input,.select,.textarea{
  width:100%;
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.12);
  border-radius:12px;
  color:var(--text);
  padding:10px 12px;
  outline:none;
}
.select{padding-right:34px}
.input::placeholder,.textarea::placeholder{color:rgba(238,242,255,.35)}
.textarea{min-height:120px;resize:vertical}

/* Board */
.board{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
@media (max-width: 1100px){.board{grid-template-columns:1fr 1fr}}
@media (max-width: 720px){.board{grid-template-columns:1fr}}

.col{background:var(--card);border:1px solid var(--stroke);border-radius:16px;backdrop-filter: blur(14px);box-shadow:var(--shadow);min-height:520px;display:flex;flex-direction:column}
.col-head{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;padding:14px 14px 10px;border-bottom:1px solid rgba(255,255,255,.10)}
.col-title{font-size:13px;font-weight:900;letter-spacing:.3px}
.col-sub{font-size:11px;color:var(--muted2);margin-top:2px}
.badge{min-width:28px;height:22px;padding:0 8px;border-radius:999px;display:grid;place-items:center;font-size:12px;color:var(--muted);border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06)}
.col-body{padding:12px;display:flex;flex-direction:column;gap:10px;overflow:auto;flex:1}

.card{background:rgba(12,16,32,.75);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:12px;cursor:grab;transition:transform .12s ease, border-color .12s ease, background .12s ease}
.card:hover{border-color:rgba(34,211,238,.35);transform:translateY(-1px)}
.card:active{cursor:grabbing}

.card-top{display:flex;align-items:flex-start;justify-content:space-between;gap:10px}
.card-title{font-size:13px;font-weight:800;line-height:1.25}
.card-desc{margin-top:8px;font-size:12px;color:var(--muted);line-height:1.45;white-space:pre-wrap}

.pills{display:flex;gap:6px;flex-wrap:wrap;margin-top:10px}
.p{font-size:11px;padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);color:var(--muted)}
.p.priA{border-color:rgba(239,68,68,.35);color:rgba(255,214,214,.92)}
.p.priB{border-color:rgba(245,158,11,.35);color:rgba(255,242,204,.92)}
.p.priC{border-color:rgba(34,211,238,.35);color:rgba(210,247,255,.92)}
.p.owner{border-color:rgba(124,58,237,.35);color:rgba(240,231,255,.95)}

.dropHint{border:1px dashed rgba(34,211,238,.55);background:rgba(34,211,238,.08)}

/* Knowledge */
.k-layout{display:grid;grid-template-columns:320px 1fr;gap:14px}
@media (max-width: 900px){.k-layout{grid-template-columns:1fr}}

.k-sidebar{background:var(--card);border:1px solid var(--stroke);border-radius:16px;box-shadow:var(--shadow);overflow:hidden}
.k-main{background:var(--card);border:1px solid var(--stroke);border-radius:16px;box-shadow:var(--shadow);overflow:hidden}

.k-head{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:14px;border-bottom:1px solid rgba(255,255,255,.10)}
.k-title{font-size:13px;font-weight:900}
.k-sub{font-size:11px;color:var(--muted2);margin-top:2px}

.k-list{padding:10px;display:flex;flex-direction:column;gap:8px;max-height:520px;overflow:auto}
.k-item{padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.05);cursor:pointer}
.k-item.active{border-color:rgba(34,211,238,.35);background:rgba(34,211,238,.08)}
.k-item-title{font-weight:800;font-size:13px}
.k-item-meta{margin-top:4px;font-size:11px;color:var(--muted2)}

.k-main-head{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;padding:14px;border-bottom:1px solid rgba(255,255,255,.10)}
.k-main-title{font-size:15px;font-weight:900}
.k-main-meta{margin-top:4px;font-size:11px;color:var(--muted2)}
.k-actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}

.k-content{padding:16px;color:rgba(238,242,255,.92);line-height:1.6}
.k-content h1{font-size:18px;margin:0 0 10px}
.k-content h2{font-size:15px;margin:18px 0 10px}
.k-content h3{font-size:13px;margin:16px 0 8px}
.k-content p{margin:10px 0;color:rgba(238,242,255,.88)}
.k-content ul{margin:10px 0 10px 18px}
.k-content code{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10);padding:2px 6px;border-radius:8px}
.k-content pre{background:rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.12);padding:12px;border-radius:14px;overflow:auto}

/* Panels */
.panel{background:var(--card);border:1px solid var(--stroke);border-radius:16px;box-shadow:var(--shadow);overflow:hidden}
.panel-head{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;padding:14px;border-bottom:1px solid rgba(255,255,255,.10)}
.panel-title{font-size:14px;font-weight:900}
.panel-sub{font-size:11px;color:var(--muted2);margin-top:4px}

.activity{padding:12px;display:flex;flex-direction:column;gap:10px;max-height:640px;overflow:auto}
.a-row{display:flex;gap:12px;align-items:flex-start;padding:10px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.05);border-radius:14px}
.a-time{min-width:160px;font-family:ui-monospace,SFMono-Regular,Menlo,monospace;color:rgba(34,211,238,.85);font-size:12px}
.a-text{color:rgba(238,242,255,.88);font-size:13px;white-space:pre-wrap}

.goals{padding:16px;display:flex;flex-direction:column;gap:12px}
.goal{padding:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.05);border-radius:16px}
.goal-title{font-weight:900}
.goal-meta{margin-top:6px;font-size:12px;color:var(--muted2)}
.bar{height:10px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10);border-radius:999px;overflow:hidden;margin-top:10px}
.fill{height:100%;background:linear-gradient(90deg, rgba(34,197,94,.9), rgba(34,211,238,.7));width:2%}

.footer{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-top:16px;color:var(--muted2);font-size:12px}
.footer code{color:rgba(238,242,255,.85)}
.dot-sep{margin:0 6px;color:rgba(238,242,255,.25)}

/* Modal */
.modal{position:fixed;inset:0;display:none}
.modal[aria-hidden="false"]{display:block}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.55);backdrop-filter: blur(6px)}
.modal-card{position:relative;max-width:820px;margin:10vh auto 0;background:rgba(12,16,32,.92);border:1px solid rgba(255,255,255,.16);border-radius:18px;box-shadow:0 20px 80px rgba(0,0,0,.55);overflow:hidden}
.modal-head{display:flex;justify-content:space-between;gap:12px;align-items:flex-start;padding:16px;border-bottom:1px solid rgba(255,255,255,.10)}
.modal-title{font-weight:900}
.modal-sub{font-size:12px;color:var(--muted2);margin-top:4px}
.icon-btn{appearance:none;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:var(--text);border-radius:12px;width:36px;height:36px;cursor:pointer}

.modal-body{padding:16px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media (max-width:720px){.grid{grid-template-columns:1fr}}
.span2{grid-column: span 2}
.field{display:flex;flex-direction:column;gap:6px}
.label{font-size:12px;color:var(--muted2)}

.modal-foot{padding:14px 16px;border-top:1px solid rgba(255,255,255,.10);display:flex;justify-content:flex-end;gap:10px}

.muted{color:var(--muted2)}

/* Scroll */
::-webkit-scrollbar{width:10px;height:10px}
::-webkit-scrollbar-track{background:rgba(255,255,255,.03)}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12);border-radius:999px}
::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.18)}
